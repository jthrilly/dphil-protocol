<div class="container">
	<div class="col-xs-6 form"></div>
</div>

<script type="text/javascript">
var egoBuilder = new window.netCanvas.Modules.FormBuilder();
egoBuilder.build($('.form'), {
	'heading': 'Welcome',
	'title': 'Create a new case',
	'fields': {
		'name': {
			'type':'string',
			'title':'Name',
			'required':true,
			'placeholder': 'Please enter your name.'
		},
		'case_number': {
			'type':'number',
			'title':'Case Number',
			'required':true
		},
		'start_time': {
			'type':'hidden'
		}
	},
	'options':{
		'attributes':{
			'action':'http://httpbin.org/post',
			'method':'post'
		},
		onSubmit: function(data) {
			note.debug('update ego');
			data.start_time = (new Date()).getTime();
			data.contexts = []; // create empty container for contexts;
			if (window.network.egoExists()) {
				window.network.updateNode(window.network.getEgo().id, data, function() {
					window.netCanvas.Modules.session.nextStage();
				});
			} else {
				window.network.createEgo(data);
				window.netCanvas.Modules.session.nextStage();
			}
		},
		onLoad: function() {
		        if (window.network.egoExists()) {
		            var ego = window.network.getEgo();
		            egoBuilder.addData(ego);
		        }
		},
		'buttons':{
			'submit':{
				label: 'Start',
				update_label: 'Update',
				id: 'submit-btn',
				type: 'submit',
				class: 'btn-primary'
			}
		}
	}
});


</script>
